@page "/"
@using Logic
@inject RaspiTemperatureController RaspiTemperatureController

<h1>Hello, world!</h1>

Welcome to your new app.

<p>Current temperature: @Temperature</p>


@code {

    private double Temperature { get; set; }

    /// <inheritdoc />
    protected override void OnInitialized()
    {
        base.OnInitialized();

        Refresh();
    }

    private async void Refresh()
    {
        while (true)
        {
            Temperature = RaspiTemperatureController.CurrentTemperature;
            StateHasChanged();

            await Task.Delay(RaspiTemperatureController.RefreshInterval);
        }
    }

}